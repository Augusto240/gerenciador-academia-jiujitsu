<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Alunos - JPM Team</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="/logo.png" type="image/png" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>
<body>


<div class="notificacoes-container">
  <% notificacoes = Notificacao.pendentes %>
  <% if notificacoes.any? %>
    <div class="notificacoes-lista">
      <h3>Notificações (<%= notificacoes.size %>)</h3>
      <% notificacoes.each do |notif| %>
        <div class="notificacao notificacao-<%= notif['tipo'] %>">
          <div class="notificacao-header">
            <h4><%= h notif['titulo'] %></h4>
            <span class="notificacao-data"><%= Time.parse(notif['criado_em']).strftime('%d/%m/%Y %H:%M') %></span>
          </div>
          <div class="notificacao-body">
            <%= h notif['mensagem'] %>
          </div>
          <div class="notificacao-actions">
            <a href="/notificacoes/<%= notif['id'] %>/marcar-como-lida" class="btn-small">Marcar como lida</a>
          </div>
        </div>
      <% end %>
    </div>
    <% end %>
    </div>

    <div class="container">
       <nav class="main-nav">
            <a href="/dashboard">Dashboard</a>
            <a href="/">Alunos</a>
            <a href="/aulas">Aulas e Presença</a>
            <a href="/relatorios">Relatórios</a>
        </nav>
        
        <% if session[:mensagem_sucesso] %>
            <div class="alert-sucesso">
                <%= session.delete(:mensagem_sucesso) %>
            </div>
        <% end %>

        <main>
            <%= yield %>
        </main>
    </div>
    <footer>
      <p>
        &copy; <%= Time.now.year %> JPM Team. Todos os direitos reservados.
        <br>
        Desenvolvido por <strong>José Augusto de Oliveira Neto</strong>.
      </p>
      <p>
        <a href="https://github.com/Augusto240/gerenciador-academia-jiujitsu" target="_blank">GitHub</a> |
        <a href="https://augusto240.github.io/Personal-Site/" target="_blank">Portfólio</a>
      </p>
    </footer>
</body>
</html>